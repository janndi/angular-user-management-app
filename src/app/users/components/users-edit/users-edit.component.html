<div class="userEdit">
  <header
    [pageTitle]="i18n.t(TRANS.users.userEdit)"
    [titleOnly]="true"
    (close)="gotoList()"
  ></header>

  <nz-content>
    <nz-breadcrumb>
      <nz-breadcrumb-item>
        {{ i18n.t(TRANS.sidebar.maintenance) }}
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>
        {{ i18n.t(TRANS.users.userList) }}
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>
        {{ i18n.t(TRANS.users.userEdit) }}
      </nz-breadcrumb-item>
    </nz-breadcrumb>
    <br />

    <form
      nz-form
      (ngSubmit)="save()"
      [formGroup]="userForm"
      #userEditForm="ngForm"
      autocomplete="off"
      *ngIf="user"
    >
      <nz-card [nzBordered]="false">
        <div nz-row [nzGutter]="gutter">
          <div nz-col [nzSm]="12" class="gutter-row">
            <card-title [pageTitle]="i18n.t(TRANS.users.userInfo)"></card-title>
          </div>

          <div nz-col [nzSm]="12" class="gutter-row">
            <div class="infibuttonBlocks">
              <button
                nz-button
                nzType="primary"
                class="infiButtons"
                [nzLoading]="loading$ | async"
              >
                {{ i18n.t(TRANS.general.save) }}
              </button>
              <button
                nz-button
                nzType="primary"
                (click)="gotoList()"
                [disabled]="loading$ | async"
                nzGhost
                class="infiButtons"
              >
                {{ i18n.t(TRANS.general.cancel) }}
              </button>
            </div>
          </div>
        </div>
        <br />
        <div nz-row [nzGutter]="gutter">
          <br />
          <div nz-col [nzSm]="12" class="gutter-row">
            <nz-form-item>
              <nz-form-label [nzSm]="8" [nzXs]="24" nzFor="firstName">
                {{ i18n.t(TRANS.users.firstname) }}
              </nz-form-label>
              <nz-form-control
                [nzSm]="16"
                [nzXs]="24"
                [nzErrorTip]="displayMessage.firstName"
              >
                <input nz-input id="firstName" formControlName="firstName" />
              </nz-form-control>
            </nz-form-item>

            <nz-form-item>
              <nz-form-label [nzSm]="8" [nzXs]="24" nzFor="lastName">
                {{ i18n.t(TRANS.users.lastname) }}
              </nz-form-label>
              <nz-form-control [nzSm]="16" [nzXs]="24">
                <input nz-input id="lastName" formControlName="lastName" />
              </nz-form-control>
            </nz-form-item>

            <nz-form-item>
              <nz-form-label [nzSm]="8" [nzXs]="24" nzFor="email">
                {{ i18n.t(TRANS.users.email) }}
              </nz-form-label>
              <nz-form-control
                [nzSm]="16"
                [nzXs]="24"
                [nzErrorTip]="displayMessage.email"
              >
                <input nz-input id="email" formControlName="email" />
              </nz-form-control>
            </nz-form-item>

            <nz-form-item>
              <nz-form-label [nzSm]="8" [nzXs]="24" nzFor="password">
                {{ i18n.t(TRANS.users.password) }}
              </nz-form-label>
              <nz-form-control
                [nzSm]="16"
                [nzXs]="24"
                [nzErrorTip]="displayMessage.password"
              >
                <nz-input-group [nzSuffix]="suffixTemplate">
                  <input
                    nz-input
                    id="password"
                    [type]="passwordVisible ? 'text' : 'password'"
                    formControlName="password"
                  />
                </nz-input-group>
              </nz-form-control>
              <ng-template #suffixTemplate>
                <i
                  nz-icon
                  [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
                  (click)="passwordVisible = !passwordVisible"
                ></i>
              </ng-template>
            </nz-form-item>
          </div>
          <div nz-col [nzSm]="12" class="gutter-row">
            <nz-form-item>
              <nz-form-label [nzSm]="8" [nzXs]="24" nzFor="admin">
                Admin
              </nz-form-label>
              <nz-form-control [nzSm]="16" [nzXs]="24">
                <nz-switch
                  [nzCheckedChildren]="i18n.t(TRANS.general.yes)"
                  [nzUnCheckedChildren]="i18n.t(TRANS.general.no)"
                  formControlName="admin"
                  id="admin"
                ></nz-switch>
              </nz-form-control>
            </nz-form-item>

            <nz-form-item>
              <nz-form-label [nzSm]="8" [nzXs]="24" nzFor="status">
                {{ i18n.t(TRANS.users.status) }}
              </nz-form-label>
              <nz-form-control [nzSm]="16" [nzXs]="24">
                <nz-switch
                  [nzCheckedChildren]="i18n.t(TRANS.general.active)"
                  [nzUnCheckedChildren]="i18n.t(TRANS.general.inactive)"
                  formControlName="status"
                  id="status"
                ></nz-switch>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
      </nz-card>
    </form>
  </nz-content>
</div>
